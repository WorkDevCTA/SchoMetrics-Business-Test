Utiliza el idioma Español.
Realiza un completo análisis del archivo "Desarrollo de la Plataforma Web SchoMetrics.txt".
Después de terminar el análisis del archivo, procede a realizar de manera correcta toda la Funcionalidad establecida en el archivo.
Asegúrate de generar un Desarrollo Correcto de la Plataforma Web "SchoMetrics".
Genera todas las variables de entorno necesarias del archivo ".env".
Asegúrate de terminar por completo todo el proyecto y no interrumpir el desarrollo solicitando la instalación de Supabase o solicitar alguna variable de entorno.

* Requerimientos Obligatorios:
- Diseño responsivo para dispositivos móviles
- Desarrolla los Modelos necesarios correspondientes para el archivo "schema.prisma":
        • Toma como referencia la siguiente estructura:
                // Model for users
                model User {
                id         String   @id @default(cuid())
                identifier String   @unique
                name       String
                password   String
                role       Role     @default(USER)
                userType   UserType @default(STUDENT)
                createdAt  DateTime @default(now())
                updatedAt  DateTime @updatedAt

                // ====== Relations ======= //
                profile    Profile?
                }

                // enum for UserTypes
                enum UserType {
                STUDENT
                TEACHER
                ADMIN
                }

                // enum for Roles
                enum Role {
                USER
                ADMIN
                }

                // Model Profile
                model Profile {
                id        String  @id @default(cuid())
                email     String  @unique
                bio       String?
                city      String?
                state     String?
                avatarUrl String?

                // ====== Relations ======= //
                userId String  @unique
                user   User    @relation(fields: [userId], references: [id], onDelete: Cascade)
                }

- Desarrolla todos los API endpoints necesarios y correspondientes dentro de la carpeta "/app/api/", para el adecuado funcionamiento de mi Plataforma.
- La ruta de los API endpoints para administradores deberá ser "/app/api/admin/".


* Requerimientos adicionales:
- El nombre de la Plataforma es "SchoMetrics".
- El Objetivo es "Permitir a las escuelas de todo México publicar fácilmente sus materiales reciclables como plástico, papel, vidrio, metal y más, para conectar directamente con empresas de reciclaje comprometidas".
- El nombre del Bucket de Supabase es "schometrics-business-recyclables-materials".
- Si el Usuario es de Tipo SCHOOL(Escuela) el prefijo donde se almacenarán sus recursos deberá ser "/schools/(Su NombreDeEscuela)/".
- Si el Usuario es de Tipo COMPANY(Empresa) el prefijo donde se almacenarán sus recursos deberá ser "/company/(Su NombreDeEmpresa)/".
- Genera un React Hot Toast Provider para mostrar los distintos Toast de Éxito o Error dentro de la Plataforma web.
- La Zona Horaria para las Fechas y Horas, deberá ser "Ciudad de México".
- Utiliza una UI con temática Ambiental.


Características y Funcionalidad de del Proyecto, Plataforma Web "SchoMetrics":

- Tecnologías a utilizar:
• Next.js 15
• TypeScript
• Tailwind CSS
• Prisma ORM con ProstgreSQL
• Supabase y Supabase Storage
• Shadcn
• Zod
• Openpay


- Interfaces:
- Primer interfaz "Materiales Reciclables", deberá contener las siguientes características:
        • Disponible y accesible para Todos.
        • Ubicada en "/app/materiales-reciclables"
        • UI Moderna y atractiva, donde se explique la intención del proyecto.
        • Dos botones que redireccionen a sus respectivos Inicios de Sesión: "Iniciar Sesión Para Escuelas", "Iniciar Sesión Para Empresas".  

* INTERFACES PARA LOS USUARIOS CON CUENTA TIPO SCHOOL(Escuela):
        - Interfaz Inicio de Sesión para Escuelas:
                • Ubicada en "/app/materiales-reciclables/escuelas/iniciar-sesion".
                • Formulario de Inicio de Sesión para Escuelas con las siguientes características:
                        - Primer campo: "Identificador de Escuela".
                        - Contraseña.
                        - Botón de Inicio de Sesión.
                        - Añadir sus respectivas validaciones usando Zod.

        - Interfaz "Mi Perfil" para Usuario Tipo SCHOOL(Escuela):
                • Ubicada en "/app/materiales-reciclables/escuelas/mi-perfil/${userId}".
                • Contrendra toda la información General Del Usuario.
                • Avatar del Usuario, si no existe Foto de Perfil, Mostrar las iniciales de su Nombre.
                • Opción para AÑADIR O ACTUALIZAR una Foto de Perfil (Máximo 5MB) (El prefijo donde se deberá guardar la Foto de Perfil es (/schools/${IdentificadorDeEscuela}/img-profile/)).
                • Opción que permita MODIFICAR cualquier dato General del Usuario.
                • Opción que permita ELIMINAR al Usuario Actual, eliminar todos sus registros de la Base de Datos y todos sus recursos existentes de Supabase Storage.
                • Si el Usuario ELIMINA su cuenta, la sesión actual se deberá eliminar y el usuario será redireccionado al Inicio.


        - Interfaz Formulario Publicación de Materiales Reciclables:
                • Ubicada en "/app/materiales-reciclables/escuelas/publicar-materiales".
                • Formulario "Publicación de Materiales Reciclables" exclusivo para usuario tipo SCHOOL(Escuela) Y ADMIN(Administrador), con los siguientes requerimientos:
                        • Usar Zod para las validaciones del formulario.
                        - Título.
                        - Tipo de Material(Selector).
                        - Cantidad(kg) Cantidad mínima permitida (50 Kg).
                        - Evidencia de disponibilidad de Materiales (Usar Supabase Storage):
                                • Solo imágenes con formato: JPG, JPEG, PNG o WEPB.
                                • Mínimo 1, Máximo 3 imágenes.
                                • Tamaño Máximo por imagen 5MB.
                                • El prefijo donde se deberán guardar las Evidencias es: (/schools/${IdentificadorDeEscuela}/${Titulo}/).
                        - Ciudad.
                        - Estado de la República Mexicana.
                        - Código Postal.
                        - Dirección.
                        - Coordenadas(Lat y Long).
                        - Horario de atención para recolección.
                        - Botón de Publicar.

        - Interfaz Materiales Reciclables Publicados:
                • Ubicada en "/app/materiales-reciclables/escuelas/materiales-publicados/${userId}".
                • Únicamente solo se podrán ver los Cards de los Materiales Reciclables exclusivos del ${userId} que los haya creado. 
                • Filtros de Buscador por Nombre y Selectores:
                        - Buscador por Título del Card.
                        - Selector por Tipo de Material Reciclable:
                                PLASTIC = "PLASTICO",
                                PAPER = "PAPEL",
                                GLASS = "VIDRIO",
                                METAL = "METAL",
                                METALCOPPER = "METAL COBRE",
                                ORGANIC = "ORGANICO",
                                ELECTRONIC = "ELECTRONICO",
                        - Selector por Estado (Pendiente o Comprado).
                • Vista de los Cards De Materiales Reciclables Publicados (Características):
                        • Sección que contiene los Cards generados a partir del formulario "Publicación de Materiales Reciclables".
                        - Contenido del Card:
                                • Contenido del formulario "Publicación de Materiales Reciclables".
                                # Estructura lógica y de UI: deberá cambiar dinámicamente con respecto al estado "Pendiente" o "Comprado"
                                • Badge que resalte el Tipo de Material Reciclable.
                                • Badge de "Estado de Disponibilidad": Por defecto "Disponible Para Compra", si fue comprado entonces cambiará automáticamente a "Comprado y Apartado".
                                • Mapa que muestre la Ubicación de la Escuela con respecto a las Coordenadas(Usar Leaflet para mostrar el Mapa).
                                • Botón ¿Cómo llegar? que redireccione a Google Maps y muestre la Ubicación de la Escuela con respecto a las Coordenadas.
                                • Si el estado actual del Card es "Comprado y Apartado" se deberá mostrar un Botón "Descargar Comprobante" (en formato PDF) (Para el Usuario tipo SCHOOL(Escuela)).
                                • Contenido del Comprobante(PDF) Para Escuela:
                                                - Deberá contener todos los Datos correspondientes de formulario "Realizar Compra de Materiales Reciclables" con respecto al Usuario Tipo COMPANY(Empresa) que realizó la compra. La estructura del comprobante será la siguiente:
                                                        • Estilo visual al de un Comprobante de Compra Electrónica.
                                                        • Todos los Datos de la Institución, del Card y del formulario:
                                                        • Número de Folio de Validez:
                                                                -  Generado usando NanoID (Deberá coincidir exactamente con el del "Comprobante de la Empresa" ya que es el mecanismo de validez oficial).
                                                        • Fecha y Hora en que se hará la Recolección por parte del transportista de la Empresa (Formato y Zona Horaria de Ciudad de México).
                                                        • Nombre de la Empresa.
                                                        • RFC de la Empresa.
                                                        • Dirección de la Empresa.
                                                        • Teléfono de la Empresa.
                                                        • Nombre del Transportista.
                                                        • Teléfono del Trabajador.
                                                        • Algún dato informativo que válide al Transportista de que trabaja para dicha Empresa (RFC, CURP, Matricula del Trabajador, etc).
                                • Si el estado actual es "Comprado y Apartado", deberá dejar de estar disponible y visible para la Interfaz "Materiales Reciclables Disponibles".
                                • Botón Editar (Contenido del Formulario "Publicación de Materiales Reciclables") 
                                • Botón Eliminar (Todo el Contenido del Card, Formulario y Registros de la Base de Datos)


* INTERFACES PARA LOS USUARIOS CON CUENTA TIPO COMPANY(Empresa):
        - Interfaz Inicio de Sesión para Empresas:
                • Ubicada en "/app/materiales-reciclables/empresas/iniciar-sesion".
                • Formulario de Inicio de Sesión para Empresas con las siguientes características:
                        - Primer campo: "Identificador de Empresa".
                        - Contraseña.
                        - Botón de Inicio de Sesión.
                        - Añadir sus respectivas validaciones usando Zod.

        - Interfaz "Mi Perfil" para Usuario Tipo COMPANY(Empresa):
                • Ubicada en "/app/materiales-reciclables/empresas/mi-perfil/${userId}".
                • Contrendra toda la información General Del Usuario.
                • Avatar del Usuario, si no existe Foto de Perfil, Mostrar las iniciales de su Nombre.
                • Opción para AÑADIR O ACTUALIZAR una Foto de Perfil (Máximo 5MB) (El prefijo donde se deberá guardar la Foto de Perfil es (/company/${NombreDeEmpresa}/img-profile/)).
                • Opción que permita MODIFICAR cualquier dato General del Usuario.
                • Opción que permita ELIMINAR al Usuario Actual, eliminar todos sus registros de la Base de Datos y todos sus recursos existentes de Supabase Storage.
                • Si el Usuario ELIMINA su cuenta, la sesión actual se deberá eliminar y el usuario será redireccionado al Inicio.

         - Interfaz Materiales Reciclables Disponibles:
                • Ubicada en "/app/materiales-reciclables/empresas/materiales-disponibles":
                • Esta Interfaz será exclusiva para Usuarios autenticados de tipo COMPANY(Empresa). 
                • Se podrá visualizar todos los Cards de Materiales Reciclables disponibles, creados por todos los Usuarios.
                • Únicamente se podrán visualizar los Cards de los Materiales Reciclables con estado "Disponible Para Compra".
                • Filtros de Buscador por Nombre y Selectores:
                        - Buscador por Título del Card.
                        - Selector por Tipo de Material Reciclable.
                        - Selector por Estado de la República Mexicana.
                • Vista de los Cards De Materiales Reciclables Publicados (Características):
                        • Sección que contiene los Cards generados a partir del formulario de publicación.
                        - Contenido de los Cards para Empresas:
                                • Todo el Contenido existente proveniente de los Cards de "Materiales Reciclables Publicados".
                                • Se añadirán las siguientes características:
                                        - Botón de "Comprar y Apartar" que desplegará un formulario llamado "Realizar Compra de Materiales Reciclables" con los siguientes requerimientos:
                                                - Usar Zod para las validaciones del formulario.
                                                • Nombre Completo de la Empresa.
                                                • RFC de la Empresa.
                                                • Dirección de la Empresa.
                                                • Teléfono de la Empresa.
                                                • Nombre del Transportista.
                                                • Teléfono del Trabajador.
                                               Algún dato informativo que válide al Transportista de que trabaja para dicha Empresa (RFC, CURP, Matricula del Trabajador, etc).
                                                • Selector de Fecha y Hora de Recolección (Formato y Zona Horaria de Ciudad de México).
                                                - Se deberá obtener y mostrar el "Tipo de Material" y la "Cantidad (Kg)" proveniente del Card actual seleccionado. 
                                                • Botón de "Pagar", el cual deberá tener los siguientes requerimientos:
                                                        - Usa Openpay México mediante su API para permitir recibir pagos con tarjeta de crédito y débito, efectivo en tiendas de conveniencia y transferencia electrónica utilizando Openpay.
                                                        - Agregar los datos del Cliente como Nombre y Correo Electrónico.
                                                        - El Precio Total a Pagar se realizará mediante un cálculo de la siguiente manera:
                                                                PLASTIC = "PLASTICO" = Precio por Kg (2.00 MXN),
                                                                PAPER = "PAPEL" = Precio por Kg (1.50 MXN),
                                                                GLASS = "VIDRIO" = Precio por Kg (1.50 MXN),
                                                                METAL = "METAL" = Precio por Kg (5.00 MXN),
                                                                METALCOPPER = "METAL COBRE" = Precio por Kg (10.00 MXN),
                                                                ORGANIC = "ORGANICO" = Precio por Kg (2.00 MXN),
                                                                ELECTRONIC = "ELECTRONICO" = Precio por Kg (2.50 MXN),
                                                        - Al presionar el botón de "Pagar" se deberá redireccionar al Usuario a la Pantalla de Cobro para realizar el Pago.
                                                        - Añadir una UI adecuada para los tiempos de espera durante el procesamiento del Pago.
                                                        - Añadir los respectivos Toast de "Éxito" o "Error" con respecto al estado final del procesamiento del pago, si el procesamiento se realizó con "Éxito" de redireccionará al usuario a la Interfaz "Materiales Reciclables Comprado", Si ocurrio un error Regresar al Usuario a "Materiales Reciclables Disponibles".
                                • El "Estado de Disponibilidad" del Card actual para la interfaz "Materiales Reciclables Publicados" deberá cambiar a "Comprado y Apartado" Únicamente si el procesamiento del pago se realizó con éxito y deberá dejar de aparecer en la Interfaz "Materiales Reciclables Disponibles".
                                


        
         - Interfaz Materiales Reciclables Comprados:
                • Ubicada en "/app/materiales-reciclables/empresas/materiales-comprados/${userId}":
                • Mostrar en forma de Tabla, la Lista completa de Todas las compras de Materiales Reciclables que ha realizado el Usuario de tipo COMPANY(Empresa).
                • Mostrar en la Tabla, todos los datos correspondientes y necesarios para Identificar adecuadamente los detalles de la Compra de los Materiales Reciclables.
                • Si el procesamiento del pago se realizó con éxito, en la fila correspondiente de la tabla se deberá mostrar el Botón "Descargar Comprobante" (en formato PDF) (Para el Usuario tipo COMPANY(Empresa)).
                                • Contenido del Comprobante(PDF) Para Escuela:
                                        - Deberá contar con todos los Mismos Datos del "Comprobante(PDF) Para Escuela".
                                        - Asegúrate de que el "Número de Folio de Validez" sea idéntico para ambos Comprobantes (Escuela) y (Empresa).
                                        - Únicamente el "Comprobante para Empresa" deberá contener el monto que Pago la Empresa por el Material Reciclable.
                • Generar un Componente Botón "Descargar Informa de Compras" con toda la lógica necesaria para generar un archivo en formato PDF descargable con toda la información de la Tabla de Compras realizadas.




* INTERFACES PARA LOS USUARIOS CON CUENTA TIPO ADMIN(Administrador):
        - Interfaz de "Registro" para Usuarios tipo ADMIN para Administradores:
                • Ubicada en "/app/materiales-reciclables/admin/registro-admin".
                • Formulario de Registro de Usuarios tipo ADMIN disponible solo para Administradores, las características son las siguientes:
                        - Nombre
                        - Identificador de Administrador
                        - Correo
                        - Contraseña
                        - Confirmar Contraseña
                        - Botón de Registro
                        - Añadir sus respectivas validaciones usando Zod.

        - Interfaz de "Registro" para Usuarios tipo SCHOOL(Escuela) para Administradores:
                • Ubicada en "/app/materiales-reciclables/admin/registro-usuario-school".
                • Formulario de Registro de Usuarios tipo SCHOOL disponible solo para Administradores, las características son las siguientes:
                        - Nombre de la Escuela
                        - Identificador de Escuela
                        - Correo
                        - Contraseña
                        - Confirmar Contraseña
                        - Botón de Registro
                        - Añadir sus respectivas validaciones usando Zod.

        - Interfaz de "Registro" para Usuarios tipo COMPANY(Empresa) para Administradores:
                • Ubicada en "/app/materiales-reciclables/admin/registro-usuario-company".
                • Formulario de Registro de Usuarios tipo COMPANY disponible solo para Administradores, las características son las siguientes:
                        - Nombre de la Empresa
                        - Identificador de Empresa
                        - Correo
                        - Contraseña
                        - Confirmar Contraseña
                        - Botón de Registro
                        - Añadir sus respectivas validaciones usando Zod.


        - Interfaz de "Inicio de Sesión" para Usuarios tipo ADMIN para Administradores:
                • Ubicada en "/app/materiales-reciclables/admin/login-admin".
                • Formulario de Inicio de Sesión para Usuarios de tipo ADMIN, las características son las siguientes:
                        - Identificador de Administrador
                        - Contraseña
                        - Botón de Registro
                        - Añadir sus respectivas validaciones usando Zod.

        - Interfaz "Mi Perfil" para Usuario Tipo ADMIN(Administrador):
                • Ubicada en "/app/materiales-reciclables/admin/mi-perfil/${userId}".
                • Contrendra toda la información General Del Usuario.
                • Opción que permita MODIFICAR cualquier dato General del Usuario.
                • Opción que permita ELIMINAR al Usuario Actual, eliminar todos sus registros de la Base de Datos.
                • Si el Usuario ELIMINA su cuenta, la sesión actual se deberá eliminar y el usuario será redireccionado al Inicio.

        - El Usuario Tipo Administrador deberá tener acceso a todas las Interfaces existentes y podrá MODIFICAR O ELIMINAR cualquier registro existente en la Base de Datos, incluyendo los "Materiales Reciclables Publicados" y "Materiales Reciclables Comprados".


        - Interfaz "Lista de Usuarios" existentes:
                • Ubicada en "/app/materiales-reciclables/admin/lista-de-usuarios".
                • Buscador por Nombre de Usuario.
                • Selector por tipo de Usuario (SCHOOL, COMPANY, ADMIN).
                • Mostrar en forma de Tabla todos los Usuario existentes en la Base de Datos.
                • Mostrar la principal información del Usuario.
                • Botón "Ver Más" que redireccione a la sección "Administrar Usuario" con respecto al ${userId} correspondiente.

        - Interfaz "Administrar Usuario"
                • Ubicada en "/app/materiales-reciclables/admin/lista-de-usuarios/administrar-usuario/${userId}".
                • Mostrar toda la información disponible del Usuario
                • Datos Generales del Usuario.
                • Opción que permita MODIFICAR cualquier dato General del Usuario.
                • Opción que permita ELIMINAR al Usuario Actual, eliminar todos sus registros de la Base de Datos y todos sus recursos existentes de Supabase Storage.
                • Registros de Publicación de Materiales Reciclables si el Usuario es de tipo SCHOOL(Escuela).
                • Registros de Compras de Materiales Reciclables si el Usuario es de tipo COMPANY(Empresa).

        - Interfaz Materiales Reciclables Comprados vista para usuario ADMIN(Administrador):
                • Ubicada en "/app/materiales-reciclables/admin/materiales-comprados":
                • Mostrar en forma de Tabla, la Lista completa de Todas las compras de Materiales Reciclables que se han realizado en la Plataforma.
                • Mostrar en la Tabla, todos los datos correspondientes y necesarios para Identificar adecuadamente los detalles de la Compra de los Materiales Reciclables.
                • Generar un Componente Botón "Descargar Informa de Compras" con toda la lógica necesaria para generar un archivo en formato PDF descargable con toda la información de la Tabla de Compras realizadas.
